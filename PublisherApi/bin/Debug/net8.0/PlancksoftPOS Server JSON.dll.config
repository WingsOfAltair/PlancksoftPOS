<?xml version="1.0" encoding="utf-8"?>
<configuration>
	<appSettings>
		<add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
	</appSettings>

	<system.web>
		<compilation debug="true" targetFramework="4.8" />
		<httpRuntime executionTimeout="180" maxRequestLength="2147483647" targetFramework="4.5.2" />
	</system.web>

	<system.serviceModel>
		<bindings>
			<!-- HTTP binding -->
			<webHttpBinding>
				<binding name="webHttpBindingWithJSONP" maxBufferPoolSize="524288" maxReceivedMessageSize="6000000">
					<readerQuotas
					  maxDepth="2147483647"
					  maxStringContentLength="2147483647"
					  maxArrayLength="2147483647"
					  maxBytesPerRead="2147483647"
					  maxNameTableCharCount="2147483647" />
				</binding>

				<!-- HTTPS binding -->
				<binding name="webHttpBindingWithJSONP_HTTPS" maxBufferPoolSize="524288" maxReceivedMessageSize="6000000">
					<security mode="Transport" />
					<readerQuotas
					  maxDepth="2147483647"
					  maxStringContentLength="2147483647"
					  maxArrayLength="2147483647"
					  maxBytesPerRead="2147483647"
					  maxNameTableCharCount="2147483647" />
				</binding>
			</webHttpBinding>
		</bindings>

		<services>
			<service name="PlancksoftPOSJSON_Server.PlancksoftPOSJSON_Server">
				<!-- HTTP endpoint -->
				<endpoint address=""
						  binding="webHttpBinding"
						  bindingConfiguration="webHttpBindingWithJSONP"
						  contract="PlancksoftPOSJSON_Server.IPlancksoftPOSJSON_Server"
						  behaviorConfiguration="PlancksoftPOSJSON_Server.PlancksoftPOSJSON_Server.Behavior" />

				<!-- HTTPS endpoint -->
				<endpoint address=""
						  binding="webHttpBinding"
						  bindingConfiguration="webHttpBindingWithJSONP_HTTPS"
						  contract="PlancksoftPOSJSON_Server.IPlancksoftPOSJSON_Server"
						  behaviorConfiguration="PlancksoftPOSJSON_Server.PlancksoftPOSJSON_Server.Behavior" />
			</service>
		</services>

		<behaviors>
			<endpointBehaviors>
				<behavior name="PlancksoftPOSJSON_Server.PlancksoftPOSJSON_Server.Behavior">
					<dataContractSerializer maxItemsInObjectGraph="2147483647" />
					<webHttp />
				</behavior>
			</endpointBehaviors>

			<serviceBehaviors>
				<behavior>
					<dataContractSerializer maxItemsInObjectGraph="2147483647" />
					<serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
					<serviceDebug includeExceptionDetailInFaults="true" />
				</behavior>
			</serviceBehaviors>
		</behaviors>

		<protocolMapping>
			<add binding="basicHttpsBinding" scheme="https" />
		</protocolMapping>

		<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
	</system.serviceModel>

	<system.diagnostics>
		<sources>
			<source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true">
				<listeners>
					<add name="traceListener" type="System.Diagnostics.XmlWriterTraceListener" initializeData="C:\PlancksoftPOSJSON_Server_JSON-Log.svclog" />
				</listeners>
			</source>
		</sources>
	</system.diagnostics>

	<system.webServer>
		<security>
			<requestFiltering>
				<requestLimits maxAllowedContentLength="40960000" />
			</requestFiltering>
		</security>

		<httpProtocol>
			<customHeaders>
				<add name="Access-Control-Allow-Origin" value="*" />
			</customHeaders>
		</httpProtocol>

		<modules runAllManagedModulesForAllRequests="true" />
		<directoryBrowse enabled="true" />

		<handlers>
			<remove name="ExtensionlessUrlHandler-Integrated-4.0" />
			<remove name="OPTIONSVerbHandler" />
			<remove name="TRACEVerbHandler" />
			<add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
		</handlers>
	</system.webServer>

	<runtime>
		<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
			<!-- your assembly redirects remain unchanged -->
		</assemblyBinding>
	</runtime>
</configuration>
